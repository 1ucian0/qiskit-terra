---
features:
  - |
    A new pass manager controller `rollback_if` allows to "undo" passes under certain conditions.
    If the condition is true the passes appended in that set are rolled back. Take for example a
    pass that sets a property with a particular value `set_property(value)`.
    The following pass manager schedule sets a property `property` to `3` in the first append.

    ```python
    passmanager = PassManager()
    passmanager.append(set_property(3))
    ```

    Following, the next stage will be unrolled if the update is less than the valued set (`3`). For
    that, the pass `copy_property` copies the value of `property_set['property']` into
    `property_set['previous']` and then `property` is updated.

    ```python
    passmanager.append([copy_property(), set_property(2)],
                       rollback_if=lambda property_set:
                       property_set['property'] < property_set['previous'])
    ```
    The last `set_property(2)` is undone and the property preserves the value from before.

    ```python
    print(passmanager.property_set['property'])
    ```
    ```python
    3
    ```

